# Трекер задач сотрудников

## Описание
Реализовано серверное приложение для работы с базой данных, представляющее собой трекер задач сотрудников. Приложение обеспечивает CRUD операции для сотрудников и задач, а также предоставляет два специальных эндпоинта для получения информации о загруженности сотрудников и важных задачах.

Трекер задач позволит компании эффективно управлять заданиями, назначенными сотрудникам, и обеспечивать прозрачность процессов выполнения задач. Это поможет в равномерном распределении нагрузки между сотрудниками и своевременном выполнении ключевых задач.

## Используемый стек технологий
- python
- postgresql
- django, django-filter
- django rest framework, djangorestframework-simplejwt, drf-yasg
- docker && docker-compose- 

## Глоссарий
- Задачи не взятые в работу - задачи со статусом "CREATED"
- Задачи в работе - задачи со статусом "In Progress"
- Завершенные задачи - задачи со статусом "FINISHED"
- Активные задачи -  задачи со статусом "CREATED" или "In Progress"
- Назначенные задачи - задачи, у которых заполнено поле "Исполнитель" (performer)
- Важные задачи - задачи не взятые в работу, но от которых зависят другие задачи, взятые в работу


## Структура БД

- Таблица сотрудников: 
    - ФИО (name)
    - Должность (position)
    - Дополнительные поля (унаследованные от django.contrib.auth.models.AbstractUser)

- Таблица задач: 
  - Наименование (title)
  - Ссылка на родительскую задачу (если есть зависимость) (parent)
  - Исполнитель (performer)
  - Срок (deadline)
  - Статус (status)
  - Дата/время создания (created_at)
  - Дата/время обновления (updated_at)
  - Автор (author)

## Специальные эндпойнты
- занятые сотрудники:
  - запрос из БД списка сотрудников и их задач, отсортированного по количеству активных задач.
- список важных задач:
  - запрос из БД задач, которые не взяты в работу, но от которых зависят другие задачи, взятые в работу.
  - поиск по сотрудникам, которые могут взять такие задачи (наименее загруженный сотрудник или сотрудник, выполняющий родительскую задачу, если ему назначено максимум на 2 задачи больше, чем у наименее загруженного сотрудника).
  - ответ в виде списка объектов в формате: {Важная задача, Срок, ФИО сотрудника}.

## Запуск через docker-compose
1. Заполнить файл `.env` с переменными окружения
2. Выполнить 
```commandline
    docker compose up --build
```
3. Приложение будет доступно по адресу: http://0.0.0.0:8000/
4. Документация: http://0.0.0.0:8000/swagger/

## Проверка степени покрытия тестами (linux):
```commandline
        coverage run --source='.' manage.py test 
        coverage report
```
## Заполнение БД
```commandline
    poetry run python manage.py loaddata --exclude auth.permission --exclude contenttypes ./fixtures/data.json 
```